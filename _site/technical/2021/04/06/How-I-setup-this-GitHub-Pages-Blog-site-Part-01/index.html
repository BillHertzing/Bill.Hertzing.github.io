<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>How I Setup This Github Pages Blog Site Part 01 | Bill’s Blog</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="How I Setup This Github Pages Blog Site Part 01" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I have been trying for a few years to setup a web site I can use for blogging. But since there are a lot of neat features I’d like to include, every prior attempt has foundered on getting it all to hang together, along with the problems of version control for everything. And of course cost is always a consideration. Now, I’m giving it another try, this time using the GitHub Pages to host my site, and building it with Jekyll, the static site generator. Here are the steps I’ve taken to implement the features I’d like to have." />
<meta property="og:description" content="I have been trying for a few years to setup a web site I can use for blogging. But since there are a lot of neat features I’d like to include, every prior attempt has foundered on getting it all to hang together, along with the problems of version control for everything. And of course cost is always a consideration. Now, I’m giving it another try, this time using the GitHub Pages to host my site, and building it with Jekyll, the static site generator. Here are the steps I’ve taken to implement the features I’d like to have." />
<link rel="canonical" href="https://billhertzing.github.io/technical/2021/04/06/How-I-setup-this-GitHub-Pages-Blog-site-Part-01/" />
<meta property="og:url" content="https://billhertzing.github.io/technical/2021/04/06/How-I-setup-this-GitHub-Pages-Blog-site-Part-01/" />
<meta property="og:site_name" content="Bill’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-04-06T12:31:43-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How I Setup This Github Pages Blog Site Part 01" />
<script type="application/ld+json">
{"datePublished":"2021-04-06T12:31:43-06:00","url":"https://billhertzing.github.io/technical/2021/04/06/How-I-setup-this-GitHub-Pages-Blog-site-Part-01/","dateModified":"2021-04-06T12:31:43-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://billhertzing.github.io/technical/2021/04/06/How-I-setup-this-GitHub-Pages-Blog-site-Part-01/"},"@type":"BlogPosting","description":"I have been trying for a few years to setup a web site I can use for blogging. But since there are a lot of neat features I’d like to include, every prior attempt has foundered on getting it all to hang together, along with the problems of version control for everything. And of course cost is always a consideration. Now, I’m giving it another try, this time using the GitHub Pages to host my site, and building it with Jekyll, the static site generator. Here are the steps I’ve taken to implement the features I’d like to have.","headline":"How I Setup This Github Pages Blog Site Part 01","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://billhertzing.github.io/feed.xml" title="Bill&apos;s Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Bill&#39;s Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">How I Setup This Github Pages Blog Site Part 01</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-04-06T12:31:43-06:00" itemprop="datePublished">Apr 6, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>I have been trying for a few years to setup a web site I can use for blogging. But since there are a lot of neat features I’d like to include, every prior attempt has foundered on getting it all to hang together, along with the problems of version control for everything. And of course cost is always a consideration. Now, I’m giving it another try, this time using the GitHub Pages to host my site, and building it with Jekyll, the static site generator. Here are the steps I’ve taken to implement the features I’d like to have.</p>

<p>If you would like to see a list of the articles online that have helped me create this site, please see the  <a href="#Attributions">Attributions</a> section below.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ol>
  <li>A Windows 10 PC (Laptop or desktop)</li>
  <li>a GitHub account. make a note of your username, and throughout this document, replace <em>GitHubUserName</em> with YOUR GitHub username</li>
  <li>Powershell installed and updated on Windows 10</li>
  <li>Git for Windows (or alternative Git client) installed on Windows 10</li>
  <li>Visual Studio Code (VSC) (or similar editor) installed on Windows 10
A. (VSC) GitHub extension module</li>
</ol>

<h2 id="install-ruby-and-jekyll-on-your-windows-pc">Install Ruby and Jekyll on your Windows PC</h2>

<p>(if you are cleaning up a botched prior attempt (me!), run this command in a Powershell terminal window <code class="language-plaintext highlighter-rouge">gem uninstall -aIx</code>)</p>

<ol>
  <li>Install <a href="https://rubyinstaller.org/">RubyInstaller for Windows</a>. Select a recent Ruby+DevKit version (I picked <code class="language-plaintext highlighter-rouge">RubyInstaller 3.0.0-1 released</code>) and use the default options in the installation wizard. On the last step, you’ll want to keep the option “Run ‘ridk install’ to setup MSYS2 and development toolchain.” checked. ToDo: embed .png file of screenshots for these two steps</li>
  <li>ToDo: Investigate using chocolaty to install both Ruby and MSYS2, which will make updating much easier</li>
  <li>Close the Powershell prompt window, and open a new one (this one will have the updated environment PATH information)</li>
  <li>At the Powershell prompt, Run <code class="language-plaintext highlighter-rouge">gem install jekyll bundle</code> This installed Jekyll V4.2.0 (on 2021-04-05), and a total of 28 gems ToDo: embed screenshot</li>
  <li>Run <code class="language-plaintext highlighter-rouge">jekyll -v</code> and confirm Jekyll returns its current version number ToDo: embed screenshot</li>
</ol>

<h2 id="create-a-new-git-repository">Create a new git repository</h2>

<ol>
  <li>Open a Powershell terminal, navigate to the location (directory) you want to be the parent of your repository. My parent directory is <code class="language-plaintext highlighter-rouge">C:\Dropbox\whertzing\GitHub\</code>.</li>
  <li>Create a subdirectory <code class="language-plaintext highlighter-rouge">*GitHubUserName*.github.io</code>, and <code class="language-plaintext highlighter-rouge">cd</code> into it.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">git init</code></li>
</ol>

<h2 id="create-minimal-jekyll-compliant-site-source-code">Create minimal Jekyll-compliant site source code</h2>

<ol>
  <li>Run <code class="language-plaintext highlighter-rouge">jekyll new PATH</code> (Use the FULL Path to the repository on your windows PC i.e. <code class="language-plaintext highlighter-rouge">C:\Dropbox\whertzing\GitHub\BillHertzing.github.io</code>) which will create the bare bones of the new Jekyll-compliant site source code. ToDo: add jpg</li>
  <li>(optional) I prefer to use <code class="language-plaintext highlighter-rouge">.md</code> instead of <code class="language-plaintext highlighter-rouge">.markdown</code> for the suffix of Markdown files, so I now run the two commands <code class="language-plaintext highlighter-rouge">mv about.markdown about.md</code> and <code class="language-plaintext highlighter-rouge">mv index.markdown index.md</code></li>
</ol>

<p>At this point, I’ll diverge from the many other posts about setting up Jekyll, because I want to use non-approved Jekyll Plugins as well as a non-approved Jekyll theme. To do that, I will keep the site source code under the  <code class="language-plaintext highlighter-rouge">main</code> branch of this repository, map my local <code class="language-plaintext highlighter-rouge">.\_site</code> to the <code class="language-plaintext highlighter-rouge">gh_pages</code> branch of this repository, build the site locally on my Windows PC, and push <code class="language-plaintext highlighter-rouge">.\_site</code> to the <code class="language-plaintext highlighter-rouge">gh_pages</code> branch on GitHub.</p>

<ol>
  <li>edit the <code class="language-plaintext highlighter-rouge">_config.yml</code> file, and remove a lot of the boiler plate. At this point, mine looks like this:</li>
</ol>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Jekyll configuration file for BillHertzing.github.io</span>

<span class="na">title</span><span class="pi">:</span> <span class="s">Bill's Blog</span>
<span class="na">description</span><span class="pi">:</span> <span class="pi">&gt;-</span> <span class="c1"># this means to ignore newlines until the next key, which is "baseurl:"</span>
  <span class="s">Technical articles for my code repositories. Position papers on political issues. Cute pictures of the kids. I've got it all!</span>
<span class="na">baseurl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span> <span class="c1"># the subpath of your site, e.g. /blog</span>
<span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://BillHertzing.github.io"</span> <span class="c1"># This is a User GitHub Pages site, not a Project site</span>
<span class="na">twitter_username</span><span class="pi">:</span> <span class="s">BillHertzing</span>
<span class="na">github_username</span><span class="pi">:</span>  <span class="s">BillHertzing</span>

<span class="c1"># Build settings</span>
<span class="na">markdown</span><span class="pi">:</span> <span class="s">kramdown</span>
<span class="na">permalink</span><span class="pi">:</span> <span class="s">pretty</span>
<span class="na">theme</span><span class="pi">:</span> <span class="s">minima</span>
</code></pre></div></div>

<h2 id="download-the-minima-theme">Download the minima theme</h2>

<p>Any Jekyll theme you want to use must first be downloaded to your Windows PC so run <code class="language-plaintext highlighter-rouge">gem install jekyll-theme-minima</code>.. Today (2021-04-06) it loaded jekyll-theme-minima-0.1.1.gem and 18 other gems (dependencies) as well.</p>

<h2 id="verify-the-local-site-will-build-and-serve-locally-on-your-windows-pc">Verify the local site will build and serve locally on your Windows PC</h2>

<p>It is a good idea to be able to see what your site will look like, before committing the changes to GitHub. By default, <code class="language-plaintext highlighter-rouge">jekyll build</code> will read the site’s source form the current directory, and write it to a subdirectory <code class="language-plaintext highlighter-rouge">_site</code>. and <code class="language-plaintext highlighter-rouge">jekyll serve</code> will start a local web server and serve <code class="language-plaintext highlighter-rouge">_site</code> to <code class="language-plaintext highlighter-rouge">http://localhost:4000</code>. <code class="language-plaintext highlighter-rouge">jekyll serve</code> will also build the site if any source file has been changed.</p>

<ol>
  <li>Open a Powershell terminal and navigate to your repository.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">jekyll serve</code></li>
</ol>

<h3 id="fixing-issues">Fixing issues</h3>

<p>Did you really think that everything would ‘just work’?  Hahaha! When I try this today, I get an error message “Could not find gem tzinfo-data”. Typically, new versions of one tool might break a dependency used somewhere else. In this particular case, the latest version of Ruby (3.0.0 today) no longer includes that gem by default. So, I needed to run <code class="language-plaintext highlighter-rouge">gem install tzinfo-data</code>. Then when I tried <code class="language-plaintext highlighter-rouge">jekyll serve</code>, I got an error message ““Could not find gem wdm”. So I ran <code class="language-plaintext highlighter-rouge">gem install wdm</code>. And then again for <code class="language-plaintext highlighter-rouge">webrick</code>, which required <code class="language-plaintext highlighter-rouge">bundle add webrick</code>. Depending on how much things have changed between the time I write this and the time you try to follow it, there may be other dependency changes, so just keep on trying to build and fixing the issues, until <code class="language-plaintext highlighter-rouge">jekyll serve</code> completes and starts serving up pages.
I also ran into problems with the Bundler version, getting the error <code class="language-plaintext highlighter-rouge">cannot load such file -- C:/Ruby30-x64/lib/ruby/gems/3.0.0/gems/bundler-2.2.3/libexec/bundle (LoadError)</code>. After updating the Bundler with <code class="language-plaintext highlighter-rouge">gem install bundler</code> I needed to edit the <code class="language-plaintext highlighter-rouge">Gemfile.lock</code> and change the <code class="language-plaintext highlighter-rouge">bundled with</code> line at the bottom to match the version just installed/updated.</p>

<p>I also changed the command I was using to build and serve to <code class="language-plaintext highlighter-rouge">bundle exec jekyll serve</code></p>

<p>Finally, when you’ve wrung out the bugs, Jekyll will serve the site locally. Use the browser of your choice and navigate to http://localhost:4000. With the minima theme it should look like this:
ToDo: Insert .jpg</p>

<h2 id="replace-the-original-welcome-to-jekyllmarkdown-page">Replace the original <code class="language-plaintext highlighter-rouge">welcome-to-jekyll.markdown</code> page</h2>

<ol>
  <li>In the <code class="language-plaintext highlighter-rouge">_posts</code> subdirectory, add a new file with the format <code class="language-plaintext highlighter-rouge">*YYYY-MM-dd-welcome-to-*whatever*</code>. use your current year-month-day numerals, and change <em>whatever</em> to whatever you want to call your first welcome post.  I used <code class="language-plaintext highlighter-rouge">2021-04-06-Welcome-To-Bills-Blog.md</code></li>
  <li>look at the original file in the _posts directory, which was created by the initial <code class="language-plaintext highlighter-rouge">jekyll new PATH</code> command earlier, and copy the Front Matter to your new post, update the Front Matter to change the title, update the date to match that of your filename and optionally remove the categories.</li>
  <li>In the new post, enter your initial draft of whatever you want to see on your first post, and save the file.</li>
  <li>Delete the original file in the _posts directory.</li>
</ol>

<h2 id="push-the-source-code-to-github">Push the source code to GitHub</h2>

<p>Now that we have things working locally, lets get our site stored up on GitHub. GitHub offers detailed instruction on how to do this here <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">Adding an existing project to GitHub using the command line</a>. What follows here are the summarized steps I took.</p>

<ol>
  <li>Open a Powershell terminal and navigate to your repository.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">git add .</code>  This will add all the local files to your local repository and stage them for a commit</li>
  <li>Run <code class="language-plaintext highlighter-rouge">git commit -m "First commit"</code>  This Commits the tracked changes and prepares them to be pushed to a remote repository.</li>
</ol>

<h3 id="create-a-new-repository-on-github">Create a new repository on GitHub</h3>

<p>Detailed instructions here <a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository on GitHub</a> To avoid errors, do not initialize the new repository with README, license, or gitignore files. You can add these files after your project has been pushed to GitHub.</p>

<ol>
  <li>Login to your GitHub account  ToDo: Add .jpg</li>
  <li>Click the New Repository button.</li>
  <li>Enter a name and description, select Public, and don’t check anything under the <code class="language-plaintext highlighter-rouge">initialize this repository with:</code> section. ToDo: Add .jpg</li>
  <li>Click the big <code class="language-plaintext highlighter-rouge">Create repository</code> button at the bottom.</li>
  <li>ToDo: insert jpg of the result, and highlight the link to copy</li>
  <li>Copy the HTTPS link showing at the top of the page.</li>
</ol>

<h3 id="push-the-local-repository-to-the-remote-repository">Push the local repository to the remote repository</h3>

<ol>
  <li>Open a Powershell terminal and navigate to your repository. Or just reuse an already open Powershell terminal.</li>
  <li>Details are available at <a href="https://docs.github.com/en/github/getting-started-with-github/managing-remote-repositories">Managing remote repositories</a></li>
  <li>Run <code class="language-plaintext highlighter-rouge">git remote add origin  &lt;REMOTE_URL&gt;</code>  Of course, replace <REMOTE_URL> with the URL you just copied from GitHub. Mine looked like this: `git remote add origin https://github.com/BillHertzing/Bill.Hertzing.github.io.git`</REMOTE_URL></li>
  <li>Run <code class="language-plaintext highlighter-rouge">git remote -v</code> to confirm that the origin is indeed set to the URL for the remote repository you just created on GitHub.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">git branch -M main</code> and then <code class="language-plaintext highlighter-rouge">git push -u origin main</code>  Pushes the changes in your local repository up to the remote repository</li>
  <li>Verify the source code for your site is now in GitHub. ToDo: add jpg</li>
</ol>

<h2 id="setup-visual-studio-code-vsc">Setup Visual Studio Code (VSC)</h2>

<ol>
  <li>Open the Visual Studio Code application.</li>
  <li>Select <code class="language-plaintext highlighter-rouge">Open folder</code> and navigate to the new repository you just created. To Do: insert jpg</li>
</ol>

<h2 id="confirm-that-vsc-can-push-changes-to-github">Confirm that VSC can push changes to GitHub</h2>

<ol>
  <li>Open the <code class="language-plaintext highlighter-rouge">about.md</code> file for editing, select everything after the front matter (line 7 and onward as of today), and delete it. then add the word ‘test’ on line 7.</li>
  <li>Save the file. Note that the Source Control button on the link now has a badge with the number (1) and the <code class="language-plaintext highlighter-rouge">about.md</code> file indicates M for Modified. ToDo: insert jpg</li>
  <li>Click the VSC Source Control button inside the left toolbar.</li>
  <li>In the message box, enter <code class="language-plaintext highlighter-rouge">remove unneeded parts of about.md</code>, then click the <code class="language-plaintext highlighter-rouge">check</code> above the message box (alt text is <code class="language-plaintext highlighter-rouge">Commit</code>)</li>
  <li>Note that the bottom status bar now shows there is one local commit that has not been pushed to the remote. ToDo: insert jpg</li>
  <li>Click on that area of the status bar, and the change should be pushed to GitHub</li>
  <li>On GitHub, open the about.md file, and confirm that the change has been pushed to the GitHub remote repository.</li>
</ol>

<p>ToDo: Interesting, while working on this, I learned if VSC is not logged in to anywhere, and you chose to login to GitHub, there is an authentication interaction that stores some information into VSC somewhere. I should investigate and write it up…  It opened GitHub in Chrome (my default browser), and I entered my password to GitHub. There was a form asking if I wanted to authorize, said yes, then a redirect on github, and a dialog box saying that there was a uri that wanted to open VSC. I allowed that dialog to “open the VSC app. Since it was already open, it just switched me back to the VSC instance. Nothing added to the repository where I was working, so either somewhere in VSC or somewhere in Windows, there is now an association “vscode://vscode.github-authentication/did-authenticate?windowid=1&amp;code=a_very_long_alphanumeric_string”</p>

<h2 id="enable-github-pages-on-the-github-repository">Enable GitHub pages on the GitHub repository</h2>

<ol>
  <li>Navigate to the <code class="language-plaintext highlighter-rouge">Code</code> view of the repository</li>
  <li>Create the branch <code class="language-plaintext highlighter-rouge">gh-pages</code>.</li>
  <li>Open Setting on the GitHub repository. ToDo: insert jpg</li>
  <li>Scroll down to the GitHub Pages section.</li>
  <li>Type <code class="language-plaintext highlighter-rouge">gh-pages</code> for the branch name. ToDo: insert jpg</li>
</ol>

<h2 id="add-a-workflow-file-deploy-site-to-github-pagesyml">Add a workflow file <code class="language-plaintext highlighter-rouge">deploy-site-to-github-pages.yml</code></h2>

<p>This workflow and the actions it contains are the key to an easy blogging workflow. A great piece of OSS for GitHub Actions, combined with a workflow trigger that detects a release tag, make it all work.</p>

<p>See the details of the Action here: <a href="https://github.com/peaceiris/actions-gh-pages">peaceiris/actions-gh-pages</a> by peaceiris and other contributors, and the details of the trigger here: <a href="https://www.codingwithcalvin.net/git-tag-based-released-process-using-github-actions/">Git Tag Based Released Process Using GitHub Actions</a> by Calvin A. Allen.</p>

<ol>
  <li>Create the directory and subdirectory <code class="language-plaintext highlighter-rouge">.github\workflows</code> in the repository.</li>
  <li>Create the file <code class="language-plaintext highlighter-rouge">deploy-site-to-github-pages.yml</code> in the <code class="language-plaintext highlighter-rouge">.github\workflows</code> subdirectory</li>
</ol>

<p>ToDo: figure out how, at site generation time (<code class="language-plaintext highlighter-rouge">jekyll build</code>) to read the contents of the actual file and update the text below with the actual contents.
ToDo: decide on a strategy for updating a historical post if the file changes. perhaps a revision tag for posts?
ToDo: Figure out how notify subscribers to the RSS feed if a existing post gets a new revision.
ToDo: Figure out how to e-mail an administrator if a code change triggers the need to create a post revision</p>

<p>Put the following yml code into the file, and then save it.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">deploy generated site to GitHub Pages on gh-branch</span> 

<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># Triggers the workflow on push requests to the main branch if the commit includes a tag that matches the Semantic Version release tag</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">tags</span><span class="pi">:</span> <span class="s">releases/\d+\.\d+\.\d+</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">main</span> <span class="pi">]</span>
  <span class="c1"># This line allows you to run this workflow manually from the Actions tab</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># This workflow contains a single job called "deploy-site-to-github-pages"</span>
  <span class="na">deploy-site-to-github-pages</span><span class="pi">:</span>
     <span class="c1"># The type of runner that the job will run on</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>  <span class="c1"># ToDo: investigate if a specific ubuntu is better</span>

     <span class="c1"># Steps represent a sequence of tasks that will be executed as part of the job</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout code</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
      
      <span class="c1"># Deploys a source to a destination.</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">peaceiris/actions-gh-pages@v3</span>
      <span class="na">with</span><span class="pi">:</span>
        <span class="na">github_token</span><span class="pi">:</span> <span class="s">$</span>
        <span class="na">publish_dir</span><span class="pi">:</span> <span class="s">_site</span> <span class="c1"># the action will deploy the _site contents to the (default)gh-pages branch, root directory</span>
        
</code></pre></div></div>

<p>Commit the new file and commit the changes.</p>

<h2 id="create-an-environment-for-the-deployment-action">create an Environment for the deployment action</h2>

<ol>
  <li>On GitHub, in the repository, under <code class="language-plaintext highlighter-rouge">Settings</code>, open the <code class="language-plaintext highlighter-rouge">Environment</code> tab, and click <code class="language-plaintext highlighter-rouge">Create Environment</code> ToDo: insert jpg</li>
  <li>Name the Environment <code class="language-plaintext highlighter-rouge">deploy-site-to-github-pages</code>, and click <code class="language-plaintext highlighter-rouge">Configure Environment</code> ToDo: insert jpg</li>
  <li>Click <code class="language-plaintext highlighter-rouge">x</code> on the following page to acknowledge the environment was created, and go back to the Settings-&gt;Environment page ToDo: insert jpg</li>
  <li>Click on the name of the environment just created.</li>
  <li>At the bottom of the page, click the <code class="language-plaintext highlighter-rouge">Add Secret</code> button. ToDo: insert jpg</li>
  <li>Add a Secret with the name <code class="language-plaintext highlighter-rouge">ACTIONS_STEP_DEBUG</code> and value <code class="language-plaintext highlighter-rouge">true</code>. You can remove this Secret after the action has been debugged. There is an additional Secret <code class="language-plaintext highlighter-rouge">ACTIONS_RUNNER_DEBUG</code> which if set to <code class="language-plaintext highlighter-rouge">true</code> will provide more details in the logs. I like to set this, as well. ToDo: insert jpg</li>
</ol>

<p>The final Environment should look like this: ToDo: insert jpg</p>

<h2 id="remove-_site-from-the-gitignore-file">Remove <code class="language-plaintext highlighter-rouge">_site</code> from the <code class="language-plaintext highlighter-rouge">.gitignore</code> file</h2>

<ol>
  <li>Edit the .gitignore file in the root of the repository, and remove the <code class="language-plaintext highlighter-rouge">_site</code> line. Save.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">bundle exec jekyll serve</code> to validate the site builds and displays as expected locally on your Windows PC.</li>
  <li>Note that the Source Control icon has a number, and the Source Control Changes editor window now shows multiple new files under <code class="language-plaintext highlighter-rouge">_sites</code> to be committed</li>
  <li>Commit all the changes. I used the message “Start tracking <code class="language-plaintext highlighter-rouge">_site</code>”  <em>NOTE</em> I made the changes to the original post, as specified above at (ToDo: insert link to previous place ) at this point in the development, so the jpg file also shows me removing the original post file and adding my own first post file in <code class="language-plaintext highlighter-rouge">_posts</code> ToDo: insert jpg</li>
  <li>Sync with the remote repository.</li>
  <li>Validate the <code class="language-plaintext highlighter-rouge">_site</code> and its files are now present on the GitHub repository. ToDo: insert jpg</li>
</ol>

<h2 id="review-the-workflow-run">Review the workflow run</h2>

<ol>
  <li>Navigate to the <code class="language-plaintext highlighter-rouge">Actions</code> tab in your repository. ToDo: insert jpg</li>
  <li>Drill down into the latest workflow run. ToDo: insert jpg</li>
  <li>Drill down into the job log. ToDo: insert jpg</li>
  <li>Expand the <code class="language-plaintext highlighter-rouge">Deploy</code> step. ToDo: insert jpg</li>
</ol>

<h2 id="troubleshooting-the-workflow-run">Troubleshooting the workflow run</h2>

<p>uh-oh, another issue that needs troubleshooting. Luckily that problems has been noted in the documentation for the GitHub Action, at <a href="https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-first-deployment-with-github_token">First Deployment with GITHUB_TOKEN</a>. Instructions there tell us to:</p>

<ol>
  <li>Go to the repository’s Settings tab, scroll down to GitHub Pages section, change the source to gh-pages branch and save.</li>
  <li>While the instructions says to just deploy again, our workflow is supposed to only trigger on release tags, so trigger the workflow manually by going to Actions, and click on the workflow name in the left column. ToDo: insert jpg</li>
  <li>You should see a <code class="language-plaintext highlighter-rouge">Run Workflow</code> button. Click it, and the workflow will run. Go back to Actions tab, and there should be a new workflow run. Drill down into it, and expand the log, and open the <code class="language-plaintext highlighter-rouge">Deploy</code>` section again, and we see…  ToDo: insert jpg</li>
</ol>

<p>darn, still not working. Looks like this is the problem <code class="language-plaintext highlighter-rouge">cp: no such file or directory: /home/runner/work/Bill.Hertzing.github.io/Bill.Hertzing.github.io/_site/.*</code>.
I’ve updated the <code class="language-plaintext highlighter-rouge">publish_dir</code> from <code class="language-plaintext highlighter-rouge">_site</code> to <code class="language-plaintext highlighter-rouge">./_site</code>, and tried <code class="language-plaintext highlighter-rouge">..\site</code> and all still <em>no joy</em></p>

<h2 id="invoke-deploy-site-to-github-pages-manually">Invoke <code class="language-plaintext highlighter-rouge">deploy-site-to-github-pages</code> manually</h2>

  </div><a class="u-url" href="/technical/2021/04/06/How-I-setup-this-GitHub-Pages-Blog-site-Part-01/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Bill&#39;s Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Bill&#39;s Blog</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/BillHertzing"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">BillHertzing</span></a></li><li><a href="https://www.twitter.com/BillHertzing"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">BillHertzing</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Technical articles for my code repositories. Position papers on political issues. Cute pictures of the kids. I&#39;ve got it all!</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
